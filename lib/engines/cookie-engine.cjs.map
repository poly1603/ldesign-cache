{"version":3,"file":"cookie-engine.cjs","sources":["../../src/engines/cookie-engine.ts"],"sourcesContent":[null],"names":["CookieEngine","BaseStorageEngine","constructor","config","Object","defineProperty","value","domain","path","secure","sameSite","httpOnly","updateUsedSize","catch","console","error","available","document","testKey","cookie","canRead","includes","setItem","key","ttl","Error","dataSize","calculateSize","maxSize","cookieString","encodeURIComponent","expiresDate","Date","now","toUTCString","getItem","cookies","split","encodedKey","cookieKey","cookieValue","trim","decodeURIComponent","warn","removeItem","clear","keys","_usedSize","push","length","cleanup","getRemainingSpace","Math","max","getUsageRatio"],"mappings":"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"}