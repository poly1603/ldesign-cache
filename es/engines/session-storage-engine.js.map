{"version":3,"file":"session-storage-engine.js","sources":["../../src/engines/session-storage-engine.ts"],"sourcesContent":[null],"names":["SessionStorageEngine","BaseStorageEngine","constructor","config","Object","defineProperty","maxSize","keyPrefix","updateUsedSize","catch","console","error","available","window","sessionStorage","testKey","setItem","removeItem","getFullKey","key","extractKey","fullKey","startsWith","slice","length","value","ttl","Error","data","createTTLData","dataSize","calculateSize","checkStorageSpace","cleanup","DOMException","name","getItem","expired","parseTTLData","warn","clear","keys","_usedSize","i","push","getRemainingSpace","Math","max","getUsageRatio"],"mappings":"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"}