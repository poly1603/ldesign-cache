{"version":3,"file":"base-engine.js","sources":["../../src/engines/base-engine.ts"],"sourcesContent":[null],"names":["BaseStorageEngine","constructor","Object","defineProperty","usedSize","_usedSize","hasItem","key","value","getItem","cleanup","keys","now","Date","raw","expired","parseTTLData","removeItem","parsed","JSON","parse","expiresAt","metadata","error","console","warn","calculateSize","data","size","i","length","code","charCodeAt","updateUsedSize","totalSize","checkStorageSpace","dataSize","maxSize","createTTLData","ttl","stringify"],"mappings":"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"}