{"version":3,"file":"batch-helpers.js","sources":["../../src/utils/batch-helpers.ts"],"sourcesContent":[null],"names":["batchGet","cache","keys","options","continueOnError","concurrency","results","Map","i","length","batch","slice","promises","map","key","value","get","error","settled","Promise","allSettled","result","status","set","console","warn","reason","batchSet","items","collectErrors","success","failed","failedKeys","errors","itemOptions","push","undefined","batchRemove","remove","batchHas","exists","has","BatchHelper","constructor","Object","defineProperty","createBatchHelper"],"mappings":"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"}