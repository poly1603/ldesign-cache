{"version":3,"file":"tag-manager.js","sources":["../../src/core/tag-manager.ts"],"sourcesContent":[null],"names":["TagManager","constructor","cache","config","Object","defineProperty","tagPrefix","autoCleanup","set","key","value","options","tags","cacheOptions","length","addTags","tag","tagKey","getTagKey","keys","getTagKeys","includes","push","updateKeyTags","removeTags","index","indexOf","splice","remove","getKeyTags","indexKey","getKeyIndexKey","get","getKeysByTag","getKeysByTags","mode","keySets","Promise","all","map","reduce","acc","filter","allKeys","Set","forEach","add","Array","from","clearByTag","removeKeyTagIndex","clearByTags","getAllTags","startsWith","substring","getTagStats","stats","cleanupEmptyTags","cleaned","renameTag","oldTag","newTag","TAG_INDEX_KEY","action","currentTags","updatedTags","t","createTagManager"],"mappings":"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"}