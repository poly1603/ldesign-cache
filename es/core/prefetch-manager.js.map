{"version":3,"file":"prefetch-manager.js","sources":["../../src/core/prefetch-manager.ts"],"sourcesContent":[null],"names":["AccessPatternAnalyzer","constructor","Object","defineProperty","value","Map","recordAccess","key","accessHistory","push","length","maxHistorySize","shift","accessCount","set","get","prevKey","sequences","sequenceMap","size","maxSequenceSize","sorted","Array","from","entries","sort","a","b","clear","slice","forEach","k","v","predictNext","currentKey","topN","getMostFrequent","map","frequent","Set","exclude","filter","has","getStats","totalAccess","values","reduce","hotKeys","count","patterns","toMap","to","sequence","uniqueKeys","MarkovChainStrategy","predict","_history","analyzer","updateHistory","LRUPrefetchStrategy","recentKeys","index","indexOf","splice","unshift","maxSize","pop","AssociationRuleStrategy","associated","rules","coMap","coOccurrence","_key","addRule","associatedKeys","add","PrefetchManager","config","strategies","activeStrategy","strategy","cacheGetter","cacheSetter","fetcher","predictedKeys","prefetch","keys","tasks","prefetchInProgress","existingPromise","then","fetchAndCache","finally","delete","Promise","all","catch","error","console","warn","ttl","warmup","success","failed","concurrency","keysToWarmup","batchFetcher","batchSize","i","batch","results","Error","String","retryFetch","retryCount","runConcurrent","maxRetries","lastError","resolve","setTimeout","executing","task","promise","race","setStrategy","strategyName","addStrategy","name","queueSize","prefetchQueue","inProgressCount","createPrefetchManager"],"mappings":"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"}