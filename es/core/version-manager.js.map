{"version":3,"file":"version-manager.js","sources":["../../src/core/version-manager.ts"],"sourcesContent":[null],"names":["VersionManager","constructor","cache","config","Object","defineProperty","value","Map","currentVersion","version","versionKey","autoMigrate","clearOnMismatch","registerMigration","key","from","to","migrations","set","registerMigrations","configs","forEach","initialize","storedVersion","getStoredVersion","setStoredVersion","clear","migrate","fromVersion","toVersion","migrationPath","findMigrationPath","Error","keys","data","get","migratedData","migration","error","console","directKey","has","path","current","i","found","_key","push","getCurrentVersion","checkVersion","forceUpdateVersion","getMigrations","Array","values","clearMigrations","createVersionManager"],"mappings":"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"}