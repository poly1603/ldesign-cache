{"version":3,"file":"snapshot-manager.js","sources":["../../src/core/snapshot-manager.ts"],"sourcesContent":[null],"names":["SnapshotManager","constructor","cache","Object","defineProperty","create","options","name","description","keys","includeKeys","excludeKeys","engine","metadata","customMetadata","length","filter","key","includes","data","value","get","snapshot","version","SNAPSHOT_VERSION","timestamp","Date","now","custom","restore","clear","console","warn","undefined","set","export","pretty","JSON","stringify","import","json","parse","Error","error","message","String","exportAsBlob","Blob","type","importFromBlob","blob","text","compare","snapshot1","snapshot2","keys1","Set","keys2","added","removed","modified","unchanged","has","push","value1","value2","merge","snapshots","merged","assign","getStats","keyCount","dataSize","size","age","createSnapshotManager"],"mappings":"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"}